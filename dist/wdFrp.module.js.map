{"version":3,"file":"wdFrp.module.js","sources":["../node_modules/wonder-commonlib/dist/es2015/utils/JudgeUtils.ts","es2015/JudgeUtils.ts","es2015/core/Entity.ts","../node_modules/wonder-commonlib/dist/es2015/global/Const.ts","../node_modules/wonder-commonlib/dist/es2015/List.ts","../node_modules/wonder-commonlib/dist/es2015/utils/ExtendUtils.ts","../node_modules/wonder-commonlib/dist/es2015/Collection.ts","es2015/Disposable/GroupDisposable.ts","es2015/Disposable/InnerSubscription.ts","es2015/Disposable/InnerSubscriptionGroup.ts","es2015/Disposable/SingleDisposable.ts","../node_modules/wonder-commonlib/dist/es2015/global/Variable.ts","../node_modules/wonder-commonlib/dist/es2015/Log.ts","es2015/observer/SubjectObserver.ts","es2015/core/Observer.ts","es2015/core/Main.ts","es2015/definition/typescript/decorator/contract.ts","es2015/observer/AutoDetachObserver.ts","es2015/subject/Subject.ts","es2015/utils/ClassMapUtils.ts","../node_modules/wonder-commonlib/dist/es2015/utils/FunctionUtils.ts","es2015/core/Stream.ts","es2015/stream/BaseStream.ts","es2015/observer/AnonymousObserver.ts","es2015/observer/DoObserver.ts","es2015/definition/typescript/decorator/registerClass.ts","es2015/stream/DoStream.ts","es2015/observer/ConcatObserver.ts","es2015/stream/ConcatStream.ts","es2015/observer/MapObserver.ts","es2015/stream/MapStream.ts","es2015/observer/MergeAllObserver.ts","es2015/stream/MergeAllStream.ts","es2015/observer/SkipUntilOtherObserver.ts","es2015/observer/SkipUntilSourceObserver.ts","es2015/stream/SkipUntilStream.ts","es2015/observer/TakeUntilObserver.ts","es2015/stream/TakeUntilStream.ts","es2015/observer/FilterObserver.ts","es2015/stream/FilterStream.ts","es2015/enum/FilterState.ts","es2015/observer/FilterWithStateObserver.ts","es2015/stream/FilterWithStateStream.ts","es2015/observer/MergeObserver.ts","es2015/stream/MergeStream.ts","es2015/stream/RepeatStream.ts","es2015/observer/IgnoreElementsObserver.ts","es2015/stream/IgnoreElementsStream.ts","es2015/global/Variable.ts","es2015/extend/root.ts","es2015/core/Scheduler.ts","es2015/stream/AnonymousStream.ts","es2015/stream/FromArrayStream.ts","es2015/stream/FromPromiseStream.ts","es2015/stream/FromEventPatternStream.ts","es2015/stream/IntervalStream.ts","es2015/stream/IntervalRequestStream.ts","es2015/stream/TimeoutStream.ts","es2015/stream/DeferStream.ts","../node_modules/wonder-commonlib/dist/es2015/utils/EventUtils.ts","es2015/global/Operator.ts","es2015/binding/nodejs/NodeOperator.ts","es2015/definition/typescript/decorator/virtual.ts","es2015/subject/GeneratorSubject.ts","es2015/testing/ActionType.ts","es2015/testing/Record.ts","es2015/testing/MockObserver.ts","es2015/testing/MockPromise.ts","../node_modules/wonder-commonlib/dist/es2015/Hash.ts","es2015/testing/TestStream.ts","es2015/testing/TestScheduler.ts"],"sourcesContent":["declare var global: any, module: any;\r\n\r\nexport class JudgeUtils {\r\n    public static isArray(arr: any) {\r\n        const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n        var length = arr && arr.length;\r\n\r\n        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n    }\r\n\r\n    public static isArrayExactly(arr: any) {\r\n        return Object.prototype.toString.call(arr) === \"[object Array]\";\r\n    }\r\n\r\n    public static isNumber(num: any) {\r\n        return typeof num == \"number\";\r\n    }\r\n\r\n    public static isNumberExactly(num: any) {\r\n        return Object.prototype.toString.call(num) === \"[object Number]\";\r\n    }\r\n\r\n    public static isString(str: any) {\r\n        return typeof str == \"string\";\r\n    }\r\n\r\n    public static isStringExactly(str: any) {\r\n        return Object.prototype.toString.call(str) === \"[object String]\";\r\n    }\r\n\r\n    public static isBoolean(bool: any) {\r\n        return bool === true || bool === false || toString.call(bool) === '[boolect Boolean]';\r\n    }\r\n\r\n    public static isDom(obj: any) {\r\n        return !!(obj && obj.nodeType === 1);\r\n    }\r\n\r\n\r\n    public static isObject(obj: any) {\r\n        var type = typeof obj;\r\n\r\n        return type === 'function' || type === 'object' && !!obj;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为对象字面量（{}）\r\n     */\r\n    public static isDirectObject(obj: any) {\r\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\r\n    }\r\n\r\n    /**\r\n     * 检查宿主对象是否可调用\r\n     *\r\n     * 任何对象，如果其语义在ECMAScript规范中被定义过，那么它被称为原生对象；\r\n     环境所提供的，而在ECMAScript规范中没有被描述的对象，我们称之为宿主对象。\r\n\r\n     该方法用于特性检测，判断对象是否可用。用法如下：\r\n\r\n     MyEngine addEvent():\r\n     if (Tool.judge.isHostMethod(dom, \"addEventListener\")) {    //判断dom是否具有addEventListener方法\r\n        dom.addEventListener(sEventType, fnHandler, false);\r\n        }\r\n     */\r\n    public static isHostMethod(object: any, property: any) {\r\n        var type = typeof object[property];\r\n\r\n        return type === \"function\" ||\r\n            (type === \"object\" && !!object[property]);\r\n        // || type == \"unknown\";\r\n    }\r\n\r\n    public static isNodeJs() {\r\n        return ((typeof global != \"undefined\" && global.module) || (typeof module != \"undefined\")) && typeof module.exports != \"undefined\";\r\n    }\r\n\r\n    //overwrite it in the end of this file\r\n    public static isFunction(func: any): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\r\n// IE 11 (#1621), and in Safari 8 (#1929).\r\nif (typeof /./ != 'function' && typeof Int8Array != 'object') {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return typeof func == 'function';\r\n    };\r\n}\r\nelse {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return Object.prototype.toString.call(func) === \"[object Function]\";\r\n    };\r\n}","import { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"./core/Entity\";\r\nimport { IObserver } from \"./observer/IObserver\";\r\n\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isPromise(obj) {\r\n        return !!obj\r\n            && !super.isFunction(obj.subscribe)\r\n            && super.isFunction(obj.then);\r\n    }\r\n\r\n    public static isEqual(ob1: Entity, ob2: Entity) {\r\n        return ob1.uid === ob2.uid;\r\n    }\r\n\r\n    public static isIObserver(i: IObserver) {\r\n        return i.next && i.error && i.completed;\r\n    }\r\n}","export abstract class Entity {\r\n    public static UID: number = 1;\r\n\r\n    private _uid: string = null;\r\n    get uid() {\r\n        return this._uid;\r\n    }\r\n    set uid(uid: string) {\r\n        this._uid = uid;\r\n    }\r\n\r\n    constructor(uidPre: string) {\r\n        this._uid = uidPre + String(Entity.UID++);\r\n    }\r\n}","export const $BREAK = {\r\n    break: true\r\n};\r\nexport const $REMOVE = void 0;","import { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK } from \"./global/Const\";\r\n\r\nexport class List<T> {\r\n    protected children: Array<T> = null;\r\n\r\n    public getCount(): number {\r\n        return this.children.length;\r\n    }\r\n\r\n    public hasChild(child: any): boolean {\r\n        var c: any = null,\r\n            children = this.children;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            c = children[i];\r\n\r\n            if (child.uid && c.uid && child.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (child === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (func(this.children[i], i)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    public getChildren() {\r\n        return this.children;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this.children[index];\r\n    }\r\n\r\n    public addChild(child: T) {\r\n        this.children.push(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: Array<T> | List<T> | any) {\r\n        if (JudgeUtils.isArray(arg)) {\r\n            let children: Array<T> = arg;\r\n\r\n            this.children = this.children.concat(children);\r\n        }\r\n        else if (arg instanceof List) {\r\n            let children: List<T> = arg;\r\n\r\n            this.children = this.children.concat(children.getChildren());\r\n        }\r\n        else {\r\n            let child: any = arg;\r\n\r\n            this.addChild(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    //todo test\r\n    public setChildren(children: Array<T>) {\r\n        this.children = children;\r\n\r\n        return this;\r\n    }\r\n\r\n    public unShiftChild(child: T) {\r\n        this.children.unshift(child);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this.children = [];\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        this._forEach(this.children, func, context);\r\n\r\n        return this;\r\n    }\r\n\r\n    //public removeChildAt (index) {\r\n    //    Log.error(index < 0, \"序号必须大于等于0\");\r\n    //\r\n    //    this.children.splice(index, 1);\r\n    //}\r\n    //\r\n\r\n    public toArray() {\r\n        return this.children;\r\n    }\r\n\r\n    protected copyChildren() {\r\n        return this.children.slice(0);\r\n    }\r\n\r\n    protected removeChildHelper(arg: any): Array<T> {\r\n        var result = null;\r\n\r\n        if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg;\r\n\r\n            result = this._removeChild(this.children, func);\r\n        }\r\n        else if (arg.uid) {\r\n            result = this._removeChild(this.children, (e) => {\r\n                if (!e.uid) {\r\n                    return false;\r\n                }\r\n                return e.uid === arg.uid;\r\n            });\r\n        }\r\n        else {\r\n            result = this._removeChild(this.children, (e) => {\r\n                return e === arg;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _forEach(arr: T[], func: Function, context?: any) {\r\n        var scope = context,\r\n            i = 0,\r\n            len = arr.length;\r\n\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (func.call(scope, arr[i], i) === $BREAK) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _removeChild(arr: T[], func: Function) {\r\n        var self = this,\r\n            removedElementArr = [],\r\n            remainElementArr = [];\r\n\r\n        this._forEach(arr, (e, index) => {\r\n            if (!!func.call(self, e)) {\r\n                removedElementArr.push(e);\r\n            }\r\n            else {\r\n                remainElementArr.push(e);\r\n            }\r\n        });\r\n\r\n        this.children = remainElementArr;\r\n\r\n        return removedElementArr;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ExtendUtils {\r\n    /**\r\n     * 深拷贝\r\n     *\r\n     * 示例：\r\n     * 如果拷贝对象为数组，能够成功拷贝（不拷贝Array原型链上的成员）\r\n     * expect(extend.extendDeep([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]])).toEqual([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]]);\r\n     *\r\n     * 如果拷贝对象为对象，能够成功拷贝（能拷贝原型链上的成员）\r\n     * var result = null;\r\n     function A() {\r\n            };\r\n     A.prototype.a = 1;\r\n\r\n     function B() {\r\n            };\r\n     B.prototype = new A();\r\n     B.prototype.b = { x: 1, y: 1 };\r\n     B.prototype.c = [{ x: 1 }, [2]];\r\n\r\n     var t = new B();\r\n\r\n     result = extend.extendDeep(t);\r\n\r\n     expect(result).toEqual(\r\n     {\r\n         a: 1,\r\n         b: { x: 1, y: 1 },\r\n         c: [{ x: 1 }, [2]]\r\n     });\r\n     * @param parent\r\n     * @param child\r\n     * @returns\r\n     */\r\n    public static extendDeep(parent, child?, filter = function(val, i) { return true; }) {\r\n        var i = null,\r\n            len = 0,\r\n            toStr = Object.prototype.toString,\r\n            sArr = \"[object Array]\",\r\n            sOb = \"[object Object]\",\r\n            type = \"\",\r\n            _child = null;\r\n\r\n        //数组的话，不获得Array原型上的成员。\r\n        if (toStr.call(parent) === sArr) {\r\n            _child = child || [];\r\n\r\n            for (i = 0, len = parent.length; i < len; i++) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        //对象的话，要获得原型链上的成员。因为考虑以下情景：\r\n        //类A继承于类B，现在想要拷贝类A的实例a的成员（包括从类B继承来的成员），那么就需要获得原型链上的成员。\r\n        else if (toStr.call(parent) === sOb) {\r\n            _child = child || {};\r\n\r\n            for (i in parent) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _child = parent;\r\n        }\r\n\r\n        return _child;\r\n    }\r\n\r\n    /**\r\n     * 浅拷贝\r\n     */\r\n    public static extend(destination: any, source: any) {\r\n        var property = \"\";\r\n\r\n        for (property in source) {\r\n            destination[property] = source[property];\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    public static copyPublicAttri(source: any) {\r\n        var property = null,\r\n            destination = {};\r\n\r\n        this.extendDeep(source, destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { List } from \"./List\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\n\r\nexport class Collection<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Collection<T>);\r\n    public clone(target: Collection<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Collection<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Collection.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Collection.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this.children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend([], this.children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public filter(func: (value: T, index: number) => boolean): Collection<T> {\r\n        var children = this.children,\r\n            result = [],\r\n            value = null;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            value = children[i];\r\n\r\n            if (func.call(children, value, i)) {\r\n                result.push(value);\r\n            }\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: (value: T, index: number) => boolean) {\r\n        var scope = this.children,\r\n            result: T = null;\r\n\r\n        this.forEach((value: T, index) => {\r\n            if (!func.call(scope, value, index)) {\r\n                return;\r\n            }\r\n\r\n            result = value;\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public reverse() {\r\n        return Collection.create<T>(this.copyChildren().reverse());\r\n    }\r\n\r\n    public removeChild(arg: any) {\r\n        return Collection.create<T>(this.removeChildHelper(arg));\r\n    }\r\n\r\n    public sort(func: (a: T, b: T) => any, isSortSelf = false): Collection<T> {\r\n        if (isSortSelf) {\r\n            this.children.sort(func);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Collection.create<T>(this.copyChildren().sort(func));\r\n    }\r\n\r\n    public map(func: (value: T, index: number) => any) {\r\n        var resultArr = [];\r\n\r\n        this.forEach((e, index) => {\r\n            var result = func(e, index);\r\n\r\n            if (result !== $REMOVE) {\r\n                resultArr.push(result);\r\n            }\r\n            //e && e[handlerName] && e[handlerName].apply(context || e, valueArr);\r\n        });\r\n\r\n        return Collection.create<any>(resultArr);\r\n    }\r\n\r\n    public removeRepeatItems() {\r\n        var noRepeatList = Collection.create<T>();\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                return;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return noRepeatList;\r\n    }\r\n\r\n    public hasRepeatItems() {\r\n        var noRepeatList = Collection.create<T>(),\r\n            hasRepeat: boolean = false;\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                hasRepeat = true;\r\n\r\n                return $BREAK;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return hasRepeat;\r\n    }\r\n}\r\n","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport class GroupDisposable extends Entity implements IDisposable {\r\n    public static create(disposable?: IDisposable) {\r\n        var obj = new this(disposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _group: Collection<IDisposable> = Collection.create<IDisposable>();\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposable?: IDisposable) {\r\n        super(\"GroupDisposable\");\r\n\r\n        if (disposable) {\r\n            this._group.addChild(disposable);\r\n        }\r\n    }\r\n\r\n    public add(disposable: IDisposable) {\r\n        this._group.addChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove(disposable: IDisposable) {\r\n        this._group.removeChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public getCount() {\r\n        return this._group.getCount();\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._group.forEach((disposable: IDisposable) => {\r\n            disposable.dispose();\r\n        });\r\n    }\r\n}","import { IDisposable } from \"./IDisposable\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { GeneratorSubject } from \"../subject/GeneratorSubject\";\r\nimport { Observer } from \"../core/Observer\";\r\n\r\nexport class InnerSubscription implements IDisposable {\r\n    public static create(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        var obj = new this(subject, observer);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _subject: Subject | GeneratorSubject = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n\r\n    public dispose() {\r\n        this._subject.remove(this._observer);\r\n\r\n        this._observer.dispose();\r\n    }\r\n}","import { IDisposable } from \"./IDisposable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport class InnerSubscriptionGroup implements IDisposable {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _container: Collection<IDisposable> = Collection.create<IDisposable>();\r\n\r\n    public addChild(child: IDisposable) {\r\n        this._container.addChild(child);\r\n    }\r\n\r\n    public dispose() {\r\n        this._container.forEach((child: IDisposable) => {\r\n            child.dispose();\r\n        });\r\n    }\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\n\r\nexport class SingleDisposable extends Entity implements IDisposable {\r\n    public static create(dispose: IDisposable | Function = null) {\r\n        var obj = new this(dispose);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _disposable: IDisposable | Function = null;\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(dispose: IDisposable | Function) {\r\n        super(\"SingleDisposable\");\r\n\r\n        this._disposable = dispose;\r\n    }\r\n\r\n    public setDispose(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        if (!this._disposable) {\r\n            return;\r\n        }\r\n\r\n        if (!!(this._disposable as IDisposable).dispose) {\r\n            (this._disposable as IDisposable).dispose();\r\n        }\r\n        else {\r\n            (this._disposable as Function)();\r\n        }\r\n    }\r\n}","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\nimport {Log} from \"../Log\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse if(typeof window != \"undefined\"){\r\n    root = window;\r\n}\r\nelse if(typeof self != \"undefined\"){\r\n    /*!\r\n     in web worker\r\n     */\r\n    root = self;\r\n}\r\nelse{\r\n    Log.error(\"no avaliable root!\");\r\n}","import { root } from \"./global/Variable\";\r\n\r\nexport class Log {\r\n    public static info = {\r\n        INVALID_PARAM: \"invalid parameter\",\r\n\r\n        helperFunc: function(...args) {\r\n            var result = \"\";\r\n\r\n            args.forEach(function(val) {\r\n                result += String(val) + \" \";\r\n            });\r\n\r\n            return result.slice(0, -1);\r\n        },\r\n        assertion: function(...args) {\r\n            if (args.length === 2) {\r\n                return this.helperFunc(args[0], args[1]);\r\n            }\r\n            else if (args.length === 3) {\r\n                return this.helperFunc(args[1], args[0], args[2]);\r\n            }\r\n            else {\r\n                throw new Error(\"args.length must <= 3\");\r\n            }\r\n        },\r\n\r\n        FUNC_INVALID: function(...args) {\r\n            args.unshift(\"invalid\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST: function(...args) {\r\n            args.unshift(\"must\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_BE: function(...args) {\r\n            args.unshift(\"must be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_BE: function(...args) {\r\n            args.unshift(\"must not be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD: function(...args) {\r\n            args.unshift(\"should\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD_NOT: function(...args) {\r\n            args.unshift(\"should not\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SUPPORT: function(...args) {\r\n            args.unshift(\"support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_SUPPORT: function(...args) {\r\n            args.unshift(\"not support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_DEFINE: function(...args) {\r\n            args.unshift(\"must define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_DEFINE: function(...args) {\r\n            args.unshift(\"must not define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNKNOW: function(...args) {\r\n            args.unshift(\"unknow\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXPECT: function(...args) {\r\n            args.unshift(\"expect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNEXPECT: function(...args) {\r\n            args.unshift(\"unexpect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXIST: function(...args) {\r\n            args.unshift(\"exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_EXIST: function(...args) {\r\n            args.unshift(\"not exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_ONLY: function(...args) {\r\n            args.unshift(\"only\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_CAN_NOT: function(...args) {\r\n            args.unshift(\"can't\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Output Debug message.\r\n     * @function\r\n     * @param {String} message\r\n     */\r\n    public static log(...messages) {\r\n        if (!this._exec(\"log\", messages)) {\r\n            root.alert(messages.join(\",\"));\r\n        }\r\n\r\n        this._exec(\"trace\", messages);\r\n    }\r\n\r\n    /**\r\n     * 断言失败时，会提示错误信息，但程序会继续执行下去\r\n     * 使用断言捕捉不应该发生的非法情况。不要混淆非法情况与错误情况之间的区别，后者是必然存在的并且是一定要作出处理的。\r\n     *\r\n     * 1）对非预期错误使用断言\r\n     断言中的布尔表达式的反面一定要描述一个非预期错误，下面所述的在一定情况下为非预期错误的一些例子：\r\n     （1）空指针。\r\n     （2）输入或者输出参数的值不在预期范围内。\r\n     （3）数组的越界。\r\n     非预期错误对应的就是预期错误，我们通常使用错误处理代码来处理预期错误，而使用断言处理非预期错误。在代码执行过程中，有些错误永远不应该发生，这样的错误是非预期错误。断言可以被看成是一种可执行的注释，你不能依赖它来让代码正常工作（《Code Complete 2》）。例如：\r\n     int nRes = f(); // nRes 由 f 函数控制， f 函数保证返回值一定在 -100 ~ 100\r\n     Assert(-100 <= nRes && nRes <= 100); // 断言，一个可执行的注释\r\n     由于 f 函数保证了返回值处于 -100 ~ 100，那么如果出现了 nRes 不在这个范围的值时，就表明一个非预期错误的出现。后面会讲到“隔栏”，那时会对断言有更加深刻的理解。\r\n     2）不要把需要执行的代码放入断言中\r\n     断言用于软件的开发和维护，而通常不在发行版本中包含断言。\r\n     需要执行的代码放入断言中是不正确的，因为在发行版本中，这些代码通常不会被执行，例如：\r\n     Assert(f()); // f 函数通常在发行版本中不会被执行\r\n     而使用如下方法则比较安全：\r\n     res = f();\r\n     Assert(res); // 安全\r\n     3）对来源于内部系统的可靠的数据使用断言，而不要对外部不可靠的数据使用断言，对于外部不可靠数据，应该使用错误处理代码。\r\n     再次强调，把断言看成可执行的注释。\r\n     * @param cond 如果cond返回false，则断言失败，显示message\r\n     * @param message\r\n     */\r\n    public static assert(cond, ...messages) {\r\n        if (cond) {\r\n            if (!this._exec(\"assert\", arguments, 1)) {\r\n                this.log.apply(this, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n        }\r\n    }\r\n\r\n    public static error(cond, ...message): any {\r\n        if (cond) {\r\n            /*!\r\n            console.error will not interrupt, it will throw error and continue exec the left statements\r\n\r\n            but here need interrupt! so not use it here.\r\n             */\r\n            //if (!this._exec(\"error\", arguments, 1)) {\r\n            throw new Error(Array.prototype.slice.call(arguments, 1).join(\"\\n\"));\r\n            //}\r\n        }\r\n    }\r\n\r\n    public static warn(...message) {\r\n        var result = this._exec(\"warn\", arguments);\r\n\r\n        if (!result) {\r\n            this.log.apply(this, arguments);\r\n        }\r\n        else {\r\n            this._exec(\"trace\", [\"warn trace\"]);\r\n        }\r\n    }\r\n\r\n    private static _exec(consoleMethod, args, sliceBegin = 0) {\r\n        if (root.console && root.console[consoleMethod]) {\r\n            root.console[consoleMethod].apply(root.console, Array.prototype.slice.call(args, sliceBegin));\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","import { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport class SubjectObserver implements IObserver {\r\n    public observers: Collection<IObserver> = Collection.create<IObserver>();\r\n\r\n    private _disposable: IDisposable = null;\r\n\r\n    public isEmpty() {\r\n        return this.observers.getCount() === 0;\r\n    }\r\n\r\n    public next(value: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.next(value);\r\n        });\r\n    }\r\n\r\n    public error(error: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.error(error);\r\n        });\r\n    }\r\n\r\n    public completed() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.completed();\r\n        });\r\n    }\r\n\r\n    public addChild(observer: Observer) {\r\n        this.observers.addChild(observer);\r\n\r\n        observer.setDisposable(this._disposable);\r\n    }\r\n\r\n    public removeChild(observer: Observer) {\r\n        this.observers.removeChild((ob: Observer) => {\r\n            return JudgeUtils.isEqual(ob, observer);\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.dispose();\r\n        });\r\n\r\n        this.observers.removeAllChildren();\r\n    }\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this.observers.forEach((observer: Observer) => {\r\n            observer.setDisposable(disposable);\r\n        });\r\n\r\n        this._disposable = disposable;\r\n    }\r\n}\r\n","import { Entity } from \"./Entity\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport abstract class Observer extends Entity implements IObserver {\r\n    private _isDisposed: boolean = null;\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    set isDisposed(isDisposed: boolean) {\r\n        this._isDisposed = isDisposed;\r\n    }\r\n\r\n    protected onUserNext: Function = null;\r\n    protected onUserError: Function = null;\r\n    protected onUserCompleted: Function = null;\r\n\r\n    private _isStop: boolean = false;\r\n    //private _disposeHandler:wdCb.Collection<Function> = wdCb.Collection.create<Function>();\r\n    private _disposable: IDisposable = null;\r\n\r\n\r\n    constructor(observer: IObserver);\r\n    constructor(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    constructor(...args) {\r\n        super(\"Observer\");\r\n\r\n        if (args.length === 1) {\r\n            let observer: IObserver = args[0];\r\n\r\n            this.onUserNext = function(v) {\r\n                observer.next(v);\r\n            };\r\n            this.onUserError = function(e) {\r\n                observer.error(e);\r\n            };\r\n            this.onUserCompleted = function() {\r\n                observer.completed();\r\n            };\r\n        }\r\n        else {\r\n            let onNext = args[0],\r\n                onError = args[1],\r\n                onCompleted = args[2];\r\n\r\n            this.onUserNext = onNext || function(v) { };\r\n            this.onUserError = onError || function(e) {\r\n                throw e;\r\n            };\r\n            this.onUserCompleted = onCompleted || function() { };\r\n        }\r\n    }\r\n\r\n    public next(value: any) {\r\n        if (!this._isStop) {\r\n            return this.onNext(value);\r\n        }\r\n    }\r\n\r\n    public error(error: any) {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onError(error);\r\n        }\r\n    }\r\n\r\n    public completed() {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onCompleted();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this._isStop = true;\r\n        this._isDisposed = true;\r\n\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n        }\r\n\r\n        //this._disposeHandler.forEach((handler) => {\r\n        //    handler();\r\n        //});\r\n    }\r\n\r\n    //public fail(e) {\r\n    //    if (!this._isStop) {\r\n    //        this._isStop = true;\r\n    //        this.error(e);\r\n    //        return true;\r\n    //    }\r\n    //\r\n    //    return false;\r\n    //}\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    protected abstract onNext(value: any);\r\n\r\n    protected abstract onError(error: any);\r\n\r\n    protected abstract onCompleted();\r\n}","export class Main {\r\n    public static isTest: boolean = false;\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Main } from \"../../../core/Main\";\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function requireCheck(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            if (Main.isTest) {\r\n                InFunc.apply(this, args);\r\n            }\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = value.apply(this, args),\r\n                params = [result].concat(args);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            if (Main.isTest) {\r\n                InFunc.call(this);\r\n            }\r\n\r\n            return getter.call(this);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            if (Main.isTest) {\r\n                InFunc.call(this, val);\r\n            }\r\n\r\n            setter.call(this, val);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = getter.call(this);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.call(this, result);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            var result = setter.call(this, val),\r\n                params = [result, val];\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (Main.isTest) {\r\n            func(target);\r\n        }\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { requireCheck } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\nexport class AutoDetachObserver extends Observer {\r\n    public static create(observer: IObserver);\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    public static create(...args) {\r\n        if (args.length === 1) {\r\n            return new this(args[0]);\r\n        }\r\n        else {\r\n            return new this(args[0], args[1], args[2]);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        if (this.isDisposed) {\r\n            Log.warn(\"only can dispose once\");\r\n        }\r\n    })\r\n    public dispose() {\r\n        // if (this.isDisposed) {\r\n        //     return;\r\n        // }\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        try {\r\n            this.onUserNext(value);\r\n        }\r\n        catch (e) {\r\n            this.onError(e);\r\n        }\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        try {\r\n            this.onUserError(error);\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n        finally {\r\n            this.dispose();\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this.onUserCompleted();\r\n            this.dispose();\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n}","import { IObserver } from \"../observer/IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { SubjectObserver } from \"../observer/SubjectObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { InnerSubscription } from \"../Disposable/InnerSubscription\";\r\n\r\nexport class Subject implements IObserver {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    set source(source: Stream) {\r\n        this._source = source;\r\n    }\r\n\r\n    private _observer: any = new SubjectObserver();\r\n\r\n    public subscribe(arg1?: Function | Observer, onError?: Function, onCompleted?: Function): IDisposable {\r\n        var observer: Observer = arg1 instanceof Observer\r\n            ? <AutoDetachObserver>arg1\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //this._source && observer.setDisposeHandler(this._source.disposeHandler);\r\n\r\n        this._observer.addChild(observer);\r\n\r\n        return InnerSubscription.create(this, observer);\r\n    }\r\n\r\n    public next(value: any) {\r\n        this._observer.next(value);\r\n    }\r\n\r\n    public error(error: any) {\r\n        this._observer.error(error);\r\n    }\r\n\r\n    public completed() {\r\n        this._observer.completed();\r\n    }\r\n\r\n    public start() {\r\n        if (!this._source) {\r\n            return;\r\n        }\r\n\r\n        this._observer.setDisposable(this._source.buildStream(this));\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this._observer.removeChild(observer);\r\n    }\r\n\r\n    public dispose() {\r\n        this._observer.dispose();\r\n    }\r\n}","export class ClassMapUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    public static addClassMap(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","export class FunctionUtils {\r\n    public static bind(object: any, func: Function) {\r\n        return function() {\r\n            return func.apply(object, arguments);\r\n        };\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"./Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport abstract class Stream extends Entity {\r\n    public scheduler: Scheduler = null;\r\n    public subscribeFunc: (observer: IObserver) => Function | void = null;\r\n\r\n    // private _isBuildStream:boolean = false;\r\n    // private _singleDisposable:IDisposable = null;\r\n\r\n    constructor(subscribeFunc) {\r\n        super(\"Stream\");\r\n\r\n        this.subscribeFunc = subscribeFunc || function() { };\r\n\r\n    }\r\n\r\n    public abstract subscribe(arg1: Function | Observer | Subject, onError?: Function, onCompleted?: Function): IDisposable;\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public do(onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        return ClassMapUtils.getClass(\"DoStream\").create(this, onNext, onError, onCompleted);\r\n    }\r\n\r\n    public map(selector: Function) {\r\n        return ClassMapUtils.getClass(\"MapStream\").create(this, selector);\r\n    }\r\n\r\n    public flatMap(selector: Function) {\r\n        return this.map(selector).mergeAll();\r\n    }\r\n\r\n    public concatMap(selector: Function) {\r\n        return this.map(selector).concatAll();\r\n    }\r\n\r\n    public mergeAll() {\r\n        return ClassMapUtils.getClass(\"MergeAllStream\").create(this);\r\n    }\r\n\r\n    public concatAll() {\r\n        return this.merge(1);\r\n    }\r\n\r\n    public skipUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"SkipUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    public takeUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"TakeUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public take(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            self.subscribe((value: any) => {\r\n                if (count > 0) {\r\n                    observer.next(value);\r\n                }\r\n\r\n                count--;\r\n\r\n                if (count <= 0) {\r\n                    observer.completed();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public takeLast(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > count) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                while (queue.length > 0) {\r\n                    observer.next(queue.shift());\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public takeWhile(predicate: (value: any, index: number, source: Stream) => boolean, thisArg = this) {\r\n        var self = this,\r\n            bindPredicate = null;\r\n\r\n        bindPredicate = FunctionUtils.bind(thisArg, predicate);\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var i = 0,\r\n                isStart = false;\r\n\r\n            self.subscribe((value: any) => {\r\n                if (bindPredicate(value, i++, self)) {\r\n                    try {\r\n                        observer.next(value);\r\n                        isStart = true;\r\n                    }\r\n                    catch (e) {\r\n                        observer.error(e);\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    if (isStart) {\r\n                        observer.completed();\r\n                    }\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public lastOrDefault(defaultValue: any = null) {\r\n        var self = this;\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > 1) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                if (queue.length === 0) {\r\n                    observer.next(defaultValue);\r\n                }\r\n                else {\r\n                    while (queue.length > 0) {\r\n                        observer.next(queue.shift());\r\n                    }\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public filter(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public filterWithState(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterWithStateStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public concat(streamArr: Array<Stream>);\r\n    public concat(...otherStream);\r\n\r\n    public concat() {\r\n        var args: Array<Stream> = null;\r\n\r\n        if (JudgeUtils.isArray(arguments[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n            args = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n\r\n        args.unshift(this);\r\n\r\n        return ClassMapUtils.getClass(\"ConcatStream\").create(args);\r\n    }\r\n\r\n    public merge(maxConcurrent: number);\r\n    public merge(streamArr: Array<Stream>);\r\n    public merge(...otherStreams);\r\n\r\n    public merge(...args) {\r\n        if (JudgeUtils.isNumber(args[0])) {\r\n            var maxConcurrent: number = args[0];\r\n\r\n            return ClassMapUtils.getClass(\"MergeStream\").create(this, maxConcurrent);\r\n        }\r\n\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n        }\r\n\r\n        let stream: Stream = null;\r\n\r\n        args.unshift(this);\r\n\r\n        stream = ClassMapUtils.getClass(\"Operator\").fromArray(args).mergeAll();\r\n\r\n        return stream;\r\n    }\r\n\r\n    public repeat(count: number = -1) {\r\n        return ClassMapUtils.getClass(\"RepeatStream\").create(this, count);\r\n    }\r\n\r\n    public ignoreElements() {\r\n        return ClassMapUtils.getClass(\"IgnoreElementsStream\").create(this);\r\n    }\r\n\r\n    protected handleSubject(subject: any) {\r\n        if (this._isSubject(subject)) {\r\n            this._setSubject(subject);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isSubject(subject: Subject) {\r\n        return subject instanceof Subject;\r\n    }\r\n\r\n    private _setSubject(subject: Subject) {\r\n        subject.source = this;\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\n\r\nexport abstract class BaseStream extends Stream {\r\n    public abstract subscribeCore(observer: IObserver): IDisposable;\r\n\r\n    // private _isBuildStream:boolean = false;\r\n    // private _disposable:IDisposable = null;\r\n\r\n    public subscribe(arg1: Function | Observer | Subject, onError?, onCompleted?): IDisposable {\r\n        var observer: Observer = null;\r\n\r\n        if (this.handleSubject(arg1)) {\r\n            return;\r\n        }\r\n\r\n        observer = arg1 instanceof Observer\r\n            ? AutoDetachObserver.create(<IObserver>arg1)\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //observer.setDisposeHandler(this.disposeHandler);\r\n\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        super.buildStream(observer);\r\n\r\n        return this.subscribeCore(observer);\r\n    }\r\n\r\n    //private _hasMultiObservers(){\r\n    //    return this.scheduler.getObservers() > 1;\r\n    //}\r\n}","import { Observer } from \"../core/Observer\";\r\n\r\nexport class AnonymousObserver extends Observer {\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function) {\r\n        return new this(onNext, onError, onCompleted);\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        this.onUserNext(value);\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        this.onUserError(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.onUserCompleted();\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class DoObserver extends Observer {\r\n    public static create(currentObserver: IObserver, prevObserver: IObserver) {\r\n        return new this(currentObserver, prevObserver);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n    private _prevObserver: IObserver = null;\r\n\r\n    constructor(currentObserver: IObserver, prevObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n        this._prevObserver = prevObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        try {\r\n            this._prevObserver.next(value);\r\n        }\r\n        catch (e) {\r\n            this._prevObserver.error(e);\r\n            this._currentObserver.error(e);\r\n        }\r\n        finally {\r\n            this._currentObserver.next(value);\r\n        }\r\n    }\r\n\r\n    protected onError(error) {\r\n        try {\r\n            this._prevObserver.error(error);\r\n        }\r\n        catch (e) {\r\n            //this._currentObserver.error(error);\r\n        }\r\n        finally {\r\n            this._currentObserver.error(error);\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this._prevObserver.completed();\r\n        }\r\n        catch (e) {\r\n            this._prevObserver.error(e);\r\n            this._currentObserver.error(e);\r\n        }\r\n        finally {\r\n            this._currentObserver.completed();\r\n        }\r\n    }\r\n}","import { ClassMapUtils } from \"../../../utils/ClassMapUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(target) {\r\n        ClassMapUtils.addClassMap(className, target);\r\n    }\r\n}\r\n\r\n","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { AnonymousObserver } from \"../observer/AnonymousObserver\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { DoObserver } from \"../observer/DoObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"DoStream\")\r\nexport class DoStream extends BaseStream {\r\n    public static create(source: Stream, onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        var obj = new this(source, onNext, onError, onCompleted);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(source: Stream, onNext: Function, onError: Function, onCompleted: Function) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._observer = AnonymousObserver.create(onNext, onError, onCompleted);\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(DoObserver.create(observer, this._observer));\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class ConcatObserver extends Observer {\r\n    public static create(currentObserver: IObserver, startNextStream: Function) {\r\n        return new this(currentObserver, startNextStream);\r\n    }\r\n\r\n    //private currentObserver:IObserver = null;\r\n    protected currentObserver: any = null;\r\n    private _startNextStream: Function = null;\r\n\r\n    constructor(currentObserver: IObserver, startNextStream: Function) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._startNextStream = startNextStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        /*!\r\n        if \"this.currentObserver.next\" error, it will pase to this.currentObserver->onError.\r\n        so it shouldn't invoke this.currentObserver.error here again!\r\n         */\r\n        //try{\r\n        this.currentObserver.next(value);\r\n        //}\r\n        //catch(e){\r\n        //    this.currentObserver.error(e);\r\n        //}\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        //this.currentObserver.completed();\r\n        this._startNextStream();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { ConcatObserver } from \"../observer/ConcatObserver\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"ConcatStream\")\r\nexport class ConcatStream extends BaseStream {\r\n    public static create(sources: Array<Stream>) {\r\n        var obj = new this(sources);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _sources: Collection<Stream> = Collection.create<Stream>();\r\n\r\n    constructor(sources: Array<Stream>) {\r\n        super(null);\r\n\r\n        var self = this;\r\n\r\n        //todo don't set scheduler here?\r\n        this.scheduler = sources[0].scheduler;\r\n\r\n        sources.forEach((source) => {\r\n            if (JudgeUtils.isPromise(source)) {\r\n                self._sources.addChild(fromPromise(source));\r\n            }\r\n            else {\r\n                self._sources.addChild(source);\r\n            }\r\n        });\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            count = this._sources.getCount(),\r\n            d = GroupDisposable.create();\r\n\r\n        function loopRecursive(i) {\r\n            if (i === count) {\r\n                observer.completed();\r\n\r\n                return;\r\n            }\r\n\r\n            d.add(self._sources.getChild(i).buildStream(ConcatObserver.create(\r\n                observer, () => {\r\n                    loopRecursive(i + 1);\r\n                })\r\n            ));\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return GroupDisposable.create(d);\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class MapObserver extends Observer {\r\n    public static create(currentObserver: IObserver, selector: Function) {\r\n        return new this(currentObserver, selector);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n    private _selector: Function = null;\r\n\r\n    constructor(currentObserver: IObserver, selector: Function) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n        this._selector = selector;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        var result = null;\r\n\r\n        try {\r\n            result = this._selector(value);\r\n        }\r\n        catch (e) {\r\n            this._currentObserver.error(e);\r\n        }\r\n        finally {\r\n            this._currentObserver.next(result);\r\n        }\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._currentObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { MapObserver } from \"../observer/MapObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MapStream\")\r\nexport class MapStream extends BaseStream {\r\n    public static create(source: Stream, selector: Function) {\r\n        var obj = new this(source, selector);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _selector: Function = null;\r\n\r\n    constructor(source: Stream, selector: Function) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n        this._selector = selector;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(MapObserver.create(observer, this._selector));\r\n    }\r\n}\r\n","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class MergeAllObserver extends Observer {\r\n    public static create(currentObserver: IObserver, groupDisposable: GroupDisposable) {\r\n        return new this(currentObserver, groupDisposable);\r\n    }\r\n\r\n    constructor(currentObserver: IObserver, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public done: boolean = false;\r\n    public currentObserver: IObserver = null;\r\n\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    @requireCheck(function(innerSource: any) {\r\n        assert(innerSource instanceof Stream || JudgeUtils.isPromise(innerSource), Log.info.FUNC_MUST_BE(\"innerSource\", \"Stream or Promise\"));\r\n\r\n    })\r\n    protected onNext(innerSource: any) {\r\n        if (JudgeUtils.isPromise(innerSource)) {\r\n            innerSource = fromPromise(innerSource);\r\n        }\r\n\r\n        let disposable = SingleDisposable.create(),\r\n            innerObserver = InnerObserver.create(this, innerSource, this._groupDisposable);\r\n\r\n        this._groupDisposable.add(disposable);\r\n\r\n        innerObserver.disposable = disposable;\r\n\r\n        disposable.setDispose(innerSource.buildStream(innerObserver));\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.done = true;\r\n\r\n        if (this._groupDisposable.getCount() <= 1) {\r\n            this.currentObserver.completed();\r\n        }\r\n    }\r\n}\r\n\r\nclass InnerObserver extends Observer {\r\n    public static create(parent: MergeAllObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        var obj = new this(parent, currentStream, groupDisposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(parent: MergeAllObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this._parent = parent;\r\n        this._currentStream = currentStream;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public disposable: SingleDisposable = null;\r\n\r\n    private _parent: MergeAllObserver = null;\r\n    private _currentStream: Stream = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    protected onNext(value) {\r\n        this._parent.currentObserver.next(value);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._parent.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        var currentStream = this._currentStream,\r\n            parent = this._parent;\r\n\r\n        if (!!this.disposable) {\r\n            this.disposable.dispose();\r\n            this._groupDisposable.remove(this.disposable);\r\n        }\r\n\r\n        /*!\r\n        if this innerSource is async stream(as promise stream),\r\n        it will first exec all parent.next and one parent.completed,\r\n        then exec all this.next and all this.completed\r\n        so in this case, it should invoke parent.currentObserver.completed after the last invokcation of this.completed(have invoked all the innerSource)\r\n        */\r\n        if (this._isAsync() && this._groupDisposable.getCount() <= 1) {\r\n            parent.currentObserver.completed();\r\n        }\r\n    }\r\n\r\n    private _isAsync() {\r\n        return this._parent.done;\r\n    }\r\n}\r\n","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { MergeAllObserver } from \"../observer/MergeAllObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MergeAllStream\")\r\nexport class MergeAllStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var groupDisposable = GroupDisposable.create();\r\n\r\n        groupDisposable.add(this._source.buildStream(MergeAllObserver.create(observer, groupDisposable)));\r\n\r\n        return groupDisposable;\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { SkipUntilStream } from \"../stream/SkipUntilStream\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport class SkipUntilOtherObserver extends Observer {\r\n    public static create(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        return new this(prevObserver, skipUntilStream);\r\n    }\r\n\r\n    public otherDisposable: IDisposable = null;\r\n\r\n    private _prevObserver: IObserver = null;\r\n    private _skipUntilStream: SkipUntilStream = null;\r\n\r\n    constructor(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        super(null, null, null);\r\n\r\n        this._prevObserver = prevObserver;\r\n        this._skipUntilStream = skipUntilStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        this._skipUntilStream.isOpen = true;\r\n\r\n        // if(this.otherDisposable.dispose())\r\n        this.otherDisposable.dispose();\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.otherDisposable.dispose();\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { SkipUntilStream } from \"../stream/SkipUntilStream\";\r\n\r\nexport class SkipUntilSourceObserver extends Observer {\r\n    public static create(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        return new this(prevObserver, skipUntilStream);\r\n    }\r\n\r\n    private _prevObserver: IObserver = null;\r\n    private _skipUntilStream: SkipUntilStream = null;\r\n\r\n    constructor(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        super(null, null, null);\r\n\r\n        this._prevObserver = prevObserver;\r\n        this._skipUntilStream = skipUntilStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        if (this._skipUntilStream.isOpen) {\r\n            this._prevObserver.next(value);\r\n        }\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        if (this._skipUntilStream.isOpen) {\r\n            this._prevObserver.completed();\r\n        }\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SkipUntilOtherObserver } from \"../observer/SkipUntilOtherObserver\";\r\nimport { SkipUntilSourceObserver } from \"../observer/SkipUntilSourceObserver\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"SkipUntilStream\")\r\nexport class SkipUntilStream extends BaseStream {\r\n    public static create(source: Stream, otherSteam: Stream) {\r\n        var obj = new this(source, otherSteam);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public isOpen: boolean = false;\r\n\r\n    private _source: Stream = null;\r\n    private _otherStream: Stream = null;\r\n\r\n    constructor(source: Stream, otherStream: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._otherStream = JudgeUtils.isPromise(otherStream) ? fromPromise(otherStream) : otherStream;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create(),\r\n            otherDisposable: IDisposable = null,\r\n            skipUntilOtherObserver: SkipUntilOtherObserver = null;\r\n        // autoDetachObserver = AutoDetachObserver.create(observer),\r\n        // sourceDisposable = null;\r\n\r\n        // sourceDisposable = this._source.buildStream(observer);\r\n\r\n        group.add(this._source.buildStream(SkipUntilSourceObserver.create(observer, this)));\r\n\r\n        // autoDetachObserver.setDisposable(sourceDisposable);\r\n\r\n        skipUntilOtherObserver = SkipUntilOtherObserver.create(observer, this);\r\n\r\n        otherDisposable = this._otherStream.buildStream(skipUntilOtherObserver);\r\n\r\n        skipUntilOtherObserver.otherDisposable = otherDisposable;\r\n\r\n        group.add(otherDisposable);\r\n\r\n        return group;\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class TakeUntilObserver extends Observer {\r\n    public static create(prevObserver: IObserver) {\r\n        return new this(prevObserver);\r\n    }\r\n\r\n    private _prevObserver: IObserver = null;\r\n\r\n    constructor(prevObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._prevObserver = prevObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        this._prevObserver.completed();\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { TakeUntilObserver } from \"../observer/TakeUntilObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"TakeUntilStream\")\r\nexport class TakeUntilStream extends BaseStream {\r\n    public static create(source: Stream, otherSteam: Stream) {\r\n        var obj = new this(source, otherSteam);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _otherStream: Stream = null;\r\n\r\n    constructor(source: Stream, otherStream: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._otherStream = JudgeUtils.isPromise(otherStream) ? fromPromise(otherStream) : otherStream;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create(),\r\n            autoDetachObserver = AutoDetachObserver.create(observer),\r\n            sourceDisposable = null;\r\n\r\n        sourceDisposable = this._source.buildStream(observer);\r\n\r\n        group.add(sourceDisposable);\r\n\r\n        autoDetachObserver.setDisposable(sourceDisposable);\r\n\r\n        group.add(this._otherStream.buildStream(TakeUntilObserver.create(autoDetachObserver)));\r\n\r\n        return group;\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\n\r\nexport class FilterObserver extends Observer {\r\n    public static create(prevObserver: IObserver, predicate: (value: any, index?: number, source?: Stream) => boolean, source: Stream) {\r\n        return new this(prevObserver, predicate, source);\r\n    }\r\n\r\n    constructor(prevObserver: IObserver, predicate: (value: any) => boolean, source: Stream) {\r\n        super(null, null, null);\r\n\r\n        this.prevObserver = prevObserver;\r\n        this.predicate = predicate;\r\n        this.source = source;\r\n    }\r\n\r\n    protected prevObserver: IObserver = null;\r\n    protected source: Stream = null;\r\n    protected i: number = 0;\r\n    protected predicate: (value: any, index?: number, source?: Stream) => boolean = null;\r\n\r\n    protected onNext(value) {\r\n        try {\r\n            if (this.predicate(value, this.i++, this.source)) {\r\n                this.prevObserver.next(value);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.prevObserver.error(e);\r\n        }\r\n\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.prevObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { FilterObserver } from \"../observer/FilterObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"FilterStream\")\r\nexport class FilterStream extends BaseStream {\r\n    public static create(source: Stream, predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        var obj = new this(source, predicate, thisArg);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream, predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this.predicate = FunctionUtils.bind(thisArg, predicate);\r\n    }\r\n\r\n    public predicate: (value: any, index?: number, source?: Stream) => boolean = null;\r\n\r\n    private _source: Stream = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.subscribe(this.createObserver(observer));\r\n    }\r\n\r\n    public internalFilter(predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        return this.createStreamForInternalFilter(this._source, this._innerPredicate(predicate, this), thisArg);\r\n    }\r\n\r\n    protected createObserver(observer: IObserver): Observer {\r\n        return FilterObserver.create(observer, this.predicate, this);\r\n    }\r\n\r\n    protected createStreamForInternalFilter(source: Stream, innerPredicate: any, thisArg: any): Stream {\r\n        return FilterStream.create(source, innerPredicate, thisArg);\r\n    }\r\n\r\n    private _innerPredicate(predicate: (value: any, index?: number, source?: Stream) => boolean, self: any) {\r\n        return (value, i, o) => {\r\n            return self.predicate(value, i, o) && predicate.call(this, value, i, o);\r\n        }\r\n    }\r\n}\r\n","export enum FilterState {\r\n    TRIGGER,\r\n    ENTER,\r\n    LEAVE\r\n}","import { FilterObserver } from \"./FilterObserver\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { FilterState } from \"../enum/FilterState\";\r\n\r\nexport class FilterWithStateObserver extends FilterObserver {\r\n    public static create(prevObserver: IObserver, predicate: (value: any, index?: number, source?: Stream) => boolean, source: Stream) {\r\n        return new this(prevObserver, predicate, source);\r\n    }\r\n\r\n    private _isTrigger: boolean = false;\r\n\r\n    protected onNext(value) {\r\n        var data: { value: any, state: FilterState } = null;\r\n\r\n        try {\r\n            if (this.predicate(value, this.i++, this.source)) {\r\n                if (!this._isTrigger) {\r\n                    data = {\r\n                        value: value,\r\n                        state: FilterState.ENTER\r\n                    };\r\n                }\r\n                else {\r\n                    data = {\r\n                        value: value,\r\n                        state: FilterState.TRIGGER\r\n                    };\r\n                }\r\n\r\n                this.prevObserver.next(data);\r\n\r\n                this._isTrigger = true;\r\n            }\r\n            else {\r\n                if (this._isTrigger) {\r\n                    data = {\r\n                        value: value,\r\n                        state: FilterState.LEAVE\r\n                    };\r\n\r\n                    this.prevObserver.next(data);\r\n                }\r\n\r\n                this._isTrigger = false;\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.prevObserver.error(e);\r\n        }\r\n    }\r\n}","import { FilterStream } from \"./FilterStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { FilterWithStateObserver } from \"../observer/FilterWithStateObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"FilterWithStateStream\")\r\nexport class FilterWithStateStream extends FilterStream {\r\n    public static create(source: Stream, predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        var obj = new this(source, predicate, thisArg);\r\n\r\n        return obj;\r\n    }\r\n\r\n    protected createObserver(observer: IObserver) {\r\n        return FilterWithStateObserver.create(observer, this.predicate, this);\r\n    }\r\n\r\n    protected createStreamForInternalFilter(source: Stream, innerPredicate: any, thisArg: any): Stream {\r\n        return FilterWithStateStream.create(source, innerPredicate, thisArg);\r\n    }\r\n}\r\n","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class MergeObserver extends Observer {\r\n    public static create(currentObserver: IObserver, maxConcurrent: number, groupDisposable: GroupDisposable) {\r\n        return new this(currentObserver, maxConcurrent, groupDisposable);\r\n    }\r\n\r\n    constructor(currentObserver: IObserver, maxConcurrent: number, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._maxConcurrent = maxConcurrent;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public done: boolean = false;\r\n    public currentObserver: IObserver = null;\r\n    public activeCount: number = 0;\r\n    public q: Array<Stream> = [];\r\n\r\n    private _maxConcurrent: number = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    public handleSubscribe(innerSource: any) {\r\n        if (JudgeUtils.isPromise(innerSource)) {\r\n            innerSource = fromPromise(innerSource);\r\n        }\r\n\r\n        let disposable = SingleDisposable.create(),\r\n            innerObserver = InnerObserver.create(this, innerSource, this._groupDisposable);\r\n\r\n        this._groupDisposable.add(disposable);\r\n\r\n        innerObserver.disposable = disposable;\r\n\r\n        disposable.setDispose(innerSource.buildStream(innerObserver));\r\n    }\r\n\r\n    @requireCheck(function(innerSource: any) {\r\n        assert(innerSource instanceof Stream || JudgeUtils.isPromise(innerSource), Log.info.FUNC_MUST_BE(\"innerSource\", \"Stream or Promise\"));\r\n\r\n    })\r\n    protected onNext(innerSource: any) {\r\n        if (this._isNotReachMaxConcurrent()) {\r\n            this.activeCount++;\r\n            this.handleSubscribe(innerSource);\r\n\r\n            return;\r\n        }\r\n\r\n        this.q.push(innerSource);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.done = true;\r\n\r\n        if (this.activeCount === 0) {\r\n            this.currentObserver.completed();\r\n        }\r\n    }\r\n\r\n    private _isNotReachMaxConcurrent() {\r\n        return this.activeCount < this._maxConcurrent;\r\n    }\r\n}\r\n\r\nclass InnerObserver extends Observer {\r\n    public static create(parent: MergeObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        var obj = new this(parent, currentStream, groupDisposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(parent: MergeObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this._parent = parent;\r\n        this._currentStream = currentStream;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public disposable: SingleDisposable = null;\r\n\r\n    private _parent: MergeObserver = null;\r\n    private _currentStream: Stream = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    protected onNext(value) {\r\n        this._parent.currentObserver.next(value);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._parent.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        var parent = this._parent;\r\n\r\n        if (!!this.disposable) {\r\n            this.disposable.dispose();\r\n            this._groupDisposable.remove(this.disposable);\r\n        }\r\n\r\n        if (parent.q.length > 0) {\r\n            parent.handleSubscribe(parent.q.shift());\r\n        }\r\n        else {\r\n            parent.activeCount -= 1;\r\n            if (this._isAsync() && parent.activeCount === 0) {\r\n                parent.currentObserver.completed();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _isAsync() {\r\n        return this._parent.done;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { MergeObserver } from \"../observer/MergeObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MergeStream\")\r\nexport class MergeStream extends BaseStream {\r\n    public static create(source: Stream, maxConcurrent: number) {\r\n        var obj = new this(source, maxConcurrent);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream, maxConcurrent: number) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._maxConcurrent = maxConcurrent;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _maxConcurrent: number = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var groupDisposable = GroupDisposable.create();\r\n\r\n        groupDisposable.add(this._source.buildStream(MergeObserver.create(observer, this._maxConcurrent, groupDisposable)));\r\n\r\n        return groupDisposable;\r\n    }\r\n}\r\n","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { ConcatObserver } from \"../observer/ConcatObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"RepeatStream\")\r\nexport class RepeatStream extends BaseStream {\r\n    public static create(source: Stream, count: number) {\r\n        var obj = new this(source, count);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _count: number = null;\r\n\r\n    constructor(source: Stream, count: number) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._count = count;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n\r\n        //this.subjectGroup = this._source.subjectGroup;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            d = GroupDisposable.create();\r\n\r\n        function loopRecursive(count) {\r\n            if (count === 0) {\r\n                observer.completed();\r\n\r\n                return;\r\n            }\r\n\r\n            d.add(\r\n                self._source.buildStream(ConcatObserver.create(observer, () => {\r\n                    loopRecursive(count - 1);\r\n                }))\r\n            );\r\n        }\r\n\r\n\r\n        this.scheduler.publishRecursive(observer, this._count, loopRecursive);\r\n\r\n        return GroupDisposable.create(d);\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class IgnoreElementsObserver extends Observer {\r\n    public static create(currentObserver: IObserver) {\r\n        return new this(currentObserver);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n\r\n    constructor(currentObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._currentObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IgnoreElementsObserver } from \"../observer/IgnoreElementsObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"IgnoreElementsStream\")\r\nexport class IgnoreElementsStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(IgnoreElementsObserver.create(observer));\r\n    }\r\n}\r\n","import { JudgeUtils } from \"../JudgeUtils\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\n\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse if (typeof window != \"undefined\") {\r\n    root = window;\r\n}\r\nelse if (typeof self != \"undefined\") {\r\n    /*!\r\n     in web worker\r\n     */\r\n    root = self;\r\n}\r\nelse {\r\n    Log.error(\"no avaliable root!\");\r\n}\r\n","import { root } from \"../global/Variable\";\r\n\r\nroot.requestNextAnimationFrame = (function() {\r\n    var originalRequestAnimationFrame = undefined,\r\n        wrapper = undefined,\r\n        callback = undefined,\r\n        geckoVersion = null,\r\n        userAgent = root.navigator && root.navigator.userAgent,\r\n        index = 0,\r\n        self = this;\r\n\r\n    wrapper = function(time) {\r\n        time = root.performance.now();\r\n        self.callback(time);\r\n    };\r\n\r\n    /*!\r\n     bug!\r\n     below code:\r\n     when invoke b after 1s, will only invoke b, not invoke a!\r\n\r\n     function a(time){\r\n     console.log(\"a\", time);\r\n     webkitRequestAnimationFrame(a);\r\n     }\r\n\r\n     function b(time){\r\n     console.log(\"b\", time);\r\n     webkitRequestAnimationFrame(b);\r\n     }\r\n\r\n     a();\r\n\r\n     setTimeout(b, 1000);\r\n\r\n\r\n\r\n     so use requestAnimationFrame priority!\r\n     */\r\n    if (root.requestAnimationFrame) {\r\n        return requestAnimationFrame;\r\n    }\r\n\r\n\r\n    // Workaround for Chrome 10 bug where Chrome\r\n    // does not pass the time to the animation function\r\n\r\n    if (root.webkitRequestAnimationFrame) {\r\n        // Define the wrapper\r\n\r\n        // Make the switch\r\n\r\n        originalRequestAnimationFrame = root.webkitRequestAnimationFrame;\r\n\r\n        root.webkitRequestAnimationFrame = function(callback, element) {\r\n            self.callback = callback;\r\n\r\n            // Browser calls the wrapper and wrapper calls the callback\r\n\r\n            return originalRequestAnimationFrame(wrapper, element);\r\n        }\r\n    }\r\n\r\n    //修改time参数\r\n    if (root.msRequestAnimationFrame) {\r\n        originalRequestAnimationFrame = root.msRequestAnimationFrame;\r\n\r\n        root.msRequestAnimationFrame = function(callback) {\r\n            self.callback = callback;\r\n\r\n            return originalRequestAnimationFrame(wrapper);\r\n        }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations\r\n    // to 30-40 fps.\r\n\r\n    if (root.mozRequestAnimationFrame) {\r\n        // Check the Gecko version. Gecko is used by browsers\r\n        // other than Firefox. Gecko 2.0 corresponds to\r\n        // Firefox 4.0.\r\n\r\n        index = userAgent.indexOf('rv:');\r\n\r\n        if (userAgent.indexOf('Gecko') != -1) {\r\n            geckoVersion = userAgent.substr(index + 3, 3);\r\n\r\n            if (geckoVersion === '2.0') {\r\n                // Forces the return statement to fall through\r\n                // to the setTimeout() function.\r\n\r\n                root.mozRequestAnimationFrame = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    return root.webkitRequestAnimationFrame ||\r\n        root.mozRequestAnimationFrame ||\r\n        root.oRequestAnimationFrame ||\r\n        root.msRequestAnimationFrame ||\r\n\r\n        function(callback, element) {\r\n            var start,\r\n                finish;\r\n\r\n            root.setTimeout(function() {\r\n                start = root.performance.now();\r\n                callback(start);\r\n                finish = root.performance.now();\r\n\r\n                self.timeout = 1000 / 60 - (finish - start);\r\n\r\n            }, self.timeout);\r\n        };\r\n}());\r\n\r\nroot.cancelNextRequestAnimationFrame = root.cancelRequestAnimationFrame\r\n    || root.webkitCancelAnimationFrame\r\n    || root.webkitCancelRequestAnimationFrame\r\n    || root.mozCancelRequestAnimationFrame\r\n    || root.oCancelRequestAnimationFrame\r\n    || root.msCancelRequestAnimationFrame\r\n    || clearTimeout;\r\n\r\n","import { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class Scheduler {\r\n    //todo remove \"...args\"\r\n    public static create(...args) {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _requestLoopId: any = null;\r\n    get requestLoopId() {\r\n        return this._requestLoopId;\r\n    }\r\n    set requestLoopId(requestLoopId: any) {\r\n        this._requestLoopId = requestLoopId;\r\n    }\r\n\r\n    //param observer is used by TestScheduler to rewrite\r\n\r\n    public publishRecursive(observer: IObserver, initial: any, action: Function) {\r\n        action(initial);\r\n    }\r\n\r\n    public publishInterval(observer: IObserver, initial: any, interval: number, action: Function): number {\r\n        return root.setInterval(() => {\r\n            initial = action(initial);\r\n        }, interval);\r\n    }\r\n\r\n    public publishIntervalRequest(observer: IObserver, action: Function) {\r\n        var self = this,\r\n            loop = (time) => {\r\n                var isEnd = action(time);\r\n\r\n                if (isEnd) {\r\n                    return;\r\n                }\r\n\r\n                self._requestLoopId = root.requestNextAnimationFrame(loop);\r\n            };\r\n\r\n        this._requestLoopId = root.requestNextAnimationFrame(loop);\r\n    }\r\n\r\n    public publishTimeout(observer: IObserver, time: number, action: Function): number {\r\n        return root.setTimeout(() => {\r\n            action(time);\r\n            observer.completed();\r\n        }, time);\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class AnonymousStream extends Stream {\r\n    public static create(subscribeFunc: Function) {\r\n        var obj = new this(subscribeFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(subscribeFunc: Function) {\r\n        super(subscribeFunc);\r\n\r\n        this.scheduler = Scheduler.create();\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public subscribe(subject: Subject): IDisposable;\r\n    public subscribe(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(onNext: (value: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void, onComplete: () => void): IDisposable;\r\n\r\n    public subscribe(...args): IDisposable {\r\n        var observer: AutoDetachObserver = null;\r\n\r\n        if (args[0] instanceof Subject) {\r\n            let subject: Subject = <Subject>args[0];\r\n\r\n            this.handleSubject(subject);\r\n\r\n            return;\r\n        }\r\n        else if (JudgeUtils.isIObserver(<IObserver>args[0])) {\r\n            observer = AutoDetachObserver.create(<IObserver>args[0]);\r\n        }\r\n        else {\r\n            let onNext: Function = <Function>args[0],\r\n                onError: Function = <Function>args[1] || null,\r\n                onCompleted: Function = <Function>args[2] || null;\r\n\r\n            observer = AutoDetachObserver.create(onNext, onError, onCompleted);\r\n        }\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromArrayStream extends BaseStream {\r\n    public static create(array: Array<any>, scheduler: Scheduler) {\r\n        var obj = new this(array, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _array: Array<any> = null;\r\n\r\n    constructor(array: Array<any>, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._array = array;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var array = this._array,\r\n            len = array.length;\r\n\r\n        function loopRecursive(i) {\r\n            if (i < len) {\r\n                observer.next(array[i]);\r\n\r\n                loopRecursive(i + 1);\r\n            } else {\r\n                observer.completed();\r\n            }\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromPromiseStream extends BaseStream {\r\n    public static create(promise: any, scheduler: Scheduler) {\r\n        var obj = new this(promise, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _promise: any = null;\r\n\r\n    constructor(promise: any, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._promise = promise;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        this._promise.then((data) => {\r\n            observer.next(data);\r\n            observer.completed();\r\n        }, (err) => {\r\n            observer.error(err);\r\n        }, observer);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromEventPatternStream extends BaseStream {\r\n    public static create(addHandler: Function, removeHandler: Function) {\r\n        var obj = new this(addHandler, removeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _addHandler: Function = null;\r\n    private _removeHandler: Function = null;\r\n\r\n    constructor(addHandler: Function, removeHandler: Function) {\r\n        super(null);\r\n\r\n        this._addHandler = addHandler;\r\n        this._removeHandler = removeHandler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        function innerHandler(event) {\r\n            observer.next(event);\r\n        }\r\n\r\n        this._addHandler(innerHandler);\r\n\r\n        return SingleDisposable.create(() => {\r\n            self._removeHandler(innerHandler);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalStream extends BaseStream {\r\n    public static create(interval: number, scheduler: Scheduler) {\r\n        var obj = new this(interval, scheduler);\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _interval: number = null;\r\n\r\n    constructor(interval: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._interval = interval;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._interval = this._interval <= 0 ? 1 : this._interval;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            id = null;\r\n\r\n        id = this.scheduler.publishInterval(observer, 0, this._interval, (count) => {\r\n            //self.scheduler.next(count);\r\n            observer.next(count);\r\n\r\n            return count + 1;\r\n        });\r\n\r\n        //Disposer.addDisposeHandler(() => {\r\n        //});\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearInterval(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalRequestStream extends BaseStream {\r\n    public static create(scheduler: Scheduler) {\r\n        var obj = new this(scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _isEnd: boolean = false;\r\n\r\n    constructor(scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        this.scheduler.publishIntervalRequest(observer, (time) => {\r\n            observer.next(time);\r\n\r\n            return self._isEnd;\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.cancelNextRequestAnimationFrame(self.scheduler.requestLoopId);\r\n            self._isEnd = true;\r\n        });\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { BaseStream } from \"./BaseStream\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class TimeoutStream extends BaseStream {\r\n    @requireCheck(function(time: number, scheduler: Scheduler) {\r\n        assert(time > 0, Log.info.FUNC_SHOULD(\"time\", \"> 0\"));\r\n    })\r\n    public static create(time: number, scheduler: Scheduler) {\r\n        var obj = new this(time, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _time: number = null;\r\n\r\n    constructor(time: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._time = time;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var id = null;\r\n\r\n        id = this.scheduler.publishTimeout(observer, this._time, (time) => {\r\n            observer.next(time);\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearTimeout(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\n\r\nexport class DeferStream extends BaseStream {\r\n    public static create(buildStreamFunc: Function) {\r\n        var obj = new this(buildStreamFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _buildStreamFunc: Function = null;\r\n\r\n    constructor(buildStreamFunc: Function) {\r\n        super(null);\r\n\r\n        this._buildStreamFunc = buildStreamFunc;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create();\r\n\r\n        group.add(this._buildStreamFunc().buildStream(observer));\r\n\r\n        return group;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class EventUtils {\r\n    public static bindEvent(context, func) {\r\n        //var args = Array.prototype.slice.call(arguments, 2),\r\n        //    self = this;\r\n\r\n        return function(event) {\r\n            //return fun.apply(object, [self.wrapEvent(event)].concat(args)); //对事件对象进行包装\r\n            return func.call(context, event);\r\n        }\r\n    }\r\n\r\n    public static addEvent(dom, eventName, handler) {\r\n        if (JudgeUtils.isHostMethod(dom, \"addEventListener\")) {\r\n            dom.addEventListener(eventName, handler, false);\r\n        }\r\n        else if (JudgeUtils.isHostMethod(dom, \"attachEvent\")) {\r\n            dom.attachEvent(\"on\" + eventName, handler);\r\n        }\r\n        else {\r\n            dom[\"on\" + eventName] = handler;\r\n        }\r\n    }\r\n\r\n    public static removeEvent(dom, eventName, handler) {\r\n        if (JudgeUtils.isHostMethod(dom, \"removeEventListener\")) {\r\n            dom.removeEventListener(eventName, handler, false);\r\n        }\r\n        else if (JudgeUtils.isHostMethod(dom, \"detachEvent\")) {\r\n            dom.detachEvent(\"on\" + eventName, handler);\r\n        }\r\n        else {\r\n            dom[\"on\" + eventName] = null;\r\n        }\r\n    }\r\n}","/*!\r\nto avoid cycle dependence problem and avoid user who use wonder-frp need mannully import stream:\r\nmanually import stream which need be imported in Stream.ts here!\r\n */\r\nimport \"../stream/DoStream\";\r\nimport \"../stream/ConcatStream\";\r\nimport \"../stream/MapStream\";\r\nimport \"../stream/MergeAllStream\";\r\nimport \"../stream/SkipUntilStream\";\r\nimport \"../stream/TakeUntilStream\";\r\nimport \"../stream/FilterStream\";\r\nimport \"../stream/FilterWithStateStream\";\r\nimport \"../stream/MergeStream\";\r\nimport \"../stream/RepeatStream\";\r\nimport \"../stream/IgnoreElementsStream\";\r\n/*!\r\n to avoid user who use wonder-frp need mannully import root:\r\n manually import root here!\r\n */\r\nimport \"../extend/root\";\r\nimport { AnonymousStream } from \"../stream/AnonymousStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { FromArrayStream } from \"../stream/FromArrayStream\";\r\nimport { FromPromiseStream } from \"../stream/FromPromiseStream\";\r\nimport { FromEventPatternStream } from \"../stream/FromEventPatternStream\";\r\nimport { IntervalStream } from \"../stream/IntervalStream\";\r\nimport { IntervalRequestStream } from \"../stream/IntervalRequestStream\";\r\nimport { TimeoutStream } from \"../stream/TimeoutStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"./Variable\";\r\nimport { DeferStream } from \"../stream/DeferStream\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { EventUtils } from \"wonder-commonlib/dist/es2015/utils/EventUtils\";\r\n\r\n@registerClass(\"Operator\")\r\nexport class Operator {\r\n    public static empty() {\r\n        return Operator.createStream((observer: IObserver) => {\r\n            observer.completed();\r\n        });\r\n    }\r\n\r\n    public static createStream(subscribeFunc) {\r\n        return AnonymousStream.create(subscribeFunc);\r\n    }\r\n\r\n    public static fromArray(array: Array<any>, scheduler = Scheduler.create()) {\r\n        return FromArrayStream.create(array, scheduler);\r\n    }\r\n}\r\n\r\nexport var createStream = Operator.createStream;\r\n\r\nexport var empty = Operator.empty;\r\n\r\nexport var fromArray = Operator.fromArray;\r\n\r\nexport var fromPromise = (promise: any, scheduler = Scheduler.create()) => {\r\n    return FromPromiseStream.create(promise, scheduler);\r\n};\r\n\r\nexport var fromEvent = (dom:HTMLElement, eventName:string) => {\r\n    return fromEventPattern((handler) => {\r\n        EventUtils.addEvent(dom, eventName, handler);\r\n    }, (handler) => {\r\n        EventUtils.removeEvent(dom, eventName, handler);\r\n    });\r\n};\r\n\r\nexport var fromEventPattern = (addHandler: Function, removeHandler: Function) => {\r\n    return FromEventPatternStream.create(addHandler, removeHandler);\r\n};\r\n\r\nexport var interval = (interval, scheduler = Scheduler.create()) => {\r\n    return IntervalStream.create(interval, scheduler);\r\n};\r\n\r\nexport var intervalRequest = (scheduler = Scheduler.create()) => {\r\n    return IntervalRequestStream.create(scheduler);\r\n};\r\n\r\nexport var timeout = (time, scheduler = Scheduler.create()) => {\r\n    return TimeoutStream.create(time, scheduler);\r\n};\r\nexport var callFunc = (func: Function, context = root) => {\r\n    return createStream((observer: IObserver) => {\r\n        try {\r\n            observer.next(func.call(context, null));\r\n        }\r\n        catch (e) {\r\n            observer.error(e);\r\n        }\r\n\r\n        observer.completed();\r\n    });\r\n};\r\n\r\nexport var judge = (condition: Function, thenSource: Function, elseSource: Function) => {\r\n    return condition() ? thenSource() : elseSource();\r\n};\r\n\r\nexport var defer = (buildStreamFunc: Function) => {\r\n    return DeferStream.create(buildStreamFunc);\r\n};\r\n\r\nexport var just = (returnValue: any) => {\r\n    return createStream((observer: IObserver) => {\r\n        observer.next(returnValue);\r\n        observer.completed();\r\n    });\r\n}\r\n","import { createStream } from \"../../global/Operator\";\r\nimport { IObserver } from \"../../observer/IObserver\";\r\nimport { AnonymousStream } from \"../../stream/AnonymousStream\";\r\n\r\nexport var fromNodeCallback = (func: Function, context?: any) => {\r\n    return (...funcArgs) => {\r\n        return createStream((observer: IObserver) => {\r\n            var hander = (err, ...args) => {\r\n                if (err) {\r\n                    observer.error(err);\r\n                    return;\r\n                }\r\n\r\n                if (args.length <= 1) {\r\n                    observer.next.apply(observer, args);\r\n                }\r\n                else {\r\n                    observer.next(args);\r\n                }\r\n\r\n                observer.completed();\r\n            };\r\n\r\n            funcArgs.push(hander);\r\n            func.apply(context, funcArgs);\r\n        });\r\n    }\r\n};\r\n\r\n/*!\r\n //todo has bug! need fix\r\n refer to rx-node:(need add .publish(), .refCount() methods!)\r\n https://github.com/Reactive-Extensions/rx-node/blob/master/index.js\r\n */\r\nexport var fromStream = (stream: any, finishEventName: string = \"end\") => {\r\n    if (stream.pause) {\r\n        stream.pause();\r\n    }\r\n\r\n    return createStream((observer) => {\r\n        var dataHandler = (data) => {\r\n            observer.next(data);\r\n        },\r\n            errorHandler = (err) => {\r\n                observer.error(err);\r\n            },\r\n            endHandler = () => {\r\n                observer.completed();\r\n            };\r\n\r\n        stream.addListener(\"data\", dataHandler);\r\n        stream.addListener(\"error\", errorHandler);\r\n        stream.addListener(finishEventName, endHandler);\r\n\r\n        if (stream.resume) {\r\n            stream.resume();\r\n        }\r\n\r\n        return () => {\r\n            stream.removeListener(\"data\", dataHandler);\r\n            stream.removeListener(\"error\", errorHandler);\r\n            stream.removeListener(finishEventName, endHandler);\r\n        };\r\n    });\r\n};\r\n\r\nexport var fromReadableStream = (stream: any) => {\r\n    return fromStream(stream, \"end\");\r\n};\r\n\r\nexport var fromWritableStream = (stream: any) => {\r\n    return fromStream(stream, \"finish\");\r\n};\r\n\r\nexport var fromTransformStream = (stream: any) => {\r\n    return fromStream(stream, \"finish\");\r\n};","export function virtual(target, name, descriptor) {\r\n    return descriptor;\r\n}\r\n","import { Entity } from \"../core/Entity\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SubjectObserver } from \"../observer/SubjectObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { InnerSubscription } from \"../Disposable/InnerSubscription\";\r\nimport { AnonymousStream } from \"../stream/AnonymousStream\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class GeneratorSubject extends Entity implements IObserver {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _isStart: boolean = false;\r\n    get isStart() {\r\n        return this._isStart;\r\n    }\r\n    set isStart(isStart: boolean) {\r\n        this._isStart = isStart;\r\n    }\r\n\r\n    constructor() {\r\n        super(\"GeneratorSubject\");\r\n    }\r\n\r\n    public observer: any = new SubjectObserver();\r\n\r\n    /*!\r\n    outer hook method\r\n     */\r\n    public onBeforeNext(value: any) {\r\n    }\r\n\r\n    public onAfterNext(value: any) {\r\n    }\r\n\r\n    public onIsCompleted(value: any) {\r\n        return false;\r\n    }\r\n\r\n    public onBeforeError(error: any) {\r\n    }\r\n\r\n    public onAfterError(error: any) {\r\n    }\r\n\r\n    public onBeforeCompleted() {\r\n    }\r\n\r\n    public onAfterCompleted() {\r\n    }\r\n\r\n\r\n    //todo\r\n    public subscribe(arg1?: Function | Observer, onError?: Function, onCompleted?: Function): IDisposable {\r\n        var observer = arg1 instanceof Observer\r\n            ? <AutoDetachObserver>arg1\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        this.observer.addChild(observer);\r\n\r\n        return InnerSubscription.create(this, observer);\r\n    }\r\n\r\n    public next(value: any) {\r\n        if (!this._isStart || this.observer.isEmpty()) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            this.onBeforeNext(value);\r\n\r\n            this.observer.next(value);\r\n\r\n            this.onAfterNext(value);\r\n\r\n            if (this.onIsCompleted(value)) {\r\n                this.completed();\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.error(e);\r\n        }\r\n    }\r\n\r\n    public error(error: any) {\r\n        if (!this._isStart || this.observer.isEmpty()) {\r\n            return;\r\n        }\r\n\r\n        this.onBeforeError(error);\r\n\r\n        this.observer.error(error);\r\n\r\n        this.onAfterError(error);\r\n    }\r\n\r\n    public completed() {\r\n        if (!this._isStart || this.observer.isEmpty()) {\r\n            return;\r\n        }\r\n\r\n        this.onBeforeCompleted();\r\n\r\n        this.observer.completed();\r\n\r\n        this.onAfterCompleted();\r\n    }\r\n\r\n    public toStream() {\r\n        var self = this,\r\n            stream = null;\r\n\r\n        stream = AnonymousStream.create((observer: Observer) => {\r\n            self.subscribe(observer);\r\n        });\r\n\r\n        return stream;\r\n    }\r\n\r\n    public start() {\r\n        var self = this;\r\n\r\n        this._isStart = true;\r\n\r\n        this.observer.setDisposable(SingleDisposable.create(() => {\r\n            self.dispose();\r\n        }));\r\n    }\r\n\r\n    public stop() {\r\n        this._isStart = false;\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this.observer.removeChild(observer);\r\n    }\r\n\r\n    public dispose() {\r\n        this.observer.dispose();\r\n    }\r\n}","export enum ActionType {\r\n    NEXT,\r\n    ERROR,\r\n    COMPLETED\r\n}","import { ActionType } from \"./ActionType\";\r\n\r\nvar defaultIsEqual = (a, b) => {\r\n    return a === b;\r\n};\r\n\r\nexport class Record {\r\n    public static create(time: number, value: any, actionType?: ActionType, comparer?: Function) {\r\n        var obj = new this(time, value, actionType, comparer);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _time: number = null;\r\n    get time() {\r\n        return this._time;\r\n    }\r\n    set time(time: number) {\r\n        this._time = time;\r\n    }\r\n\r\n    private _value: number = null;\r\n    get value() {\r\n        return this._value;\r\n    }\r\n    set value(value: number) {\r\n        this._value = value;\r\n    }\r\n\r\n    private _actionType: ActionType = null;\r\n    get actionType() {\r\n        return this._actionType;\r\n    }\r\n    set actionType(actionType: ActionType) {\r\n        this._actionType = actionType;\r\n    }\r\n\r\n    private _comparer: Function = null;\r\n\r\n    constructor(time, value, actionType: ActionType, comparer: Function) {\r\n        this._time = time;\r\n        this._value = value;\r\n        this._actionType = actionType;\r\n        this._comparer = comparer || defaultIsEqual;\r\n    }\r\n\r\n    equals(other) {\r\n        return this._time === other.time && this._comparer(this._value, other.value);\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { TestScheduler } from \"./TestScheduler\";\r\nimport { Record } from \"./Record\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { ActionType } from \"./ActionType\";\r\n\r\nexport class MockObserver extends Observer {\r\n    public static create(scheduler: TestScheduler) {\r\n        var obj = new this(scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _messages: [Record] = <[Record]>[];\r\n    get messages() {\r\n        return this._messages;\r\n    }\r\n    set messages(messages: [Record]) {\r\n        this._messages = messages;\r\n    }\r\n\r\n    private _scheduler: TestScheduler = null;\r\n\r\n    constructor(scheduler: TestScheduler) {\r\n        super(null, null, null);\r\n\r\n        this._scheduler = scheduler;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        var record = null;\r\n\r\n        if (JudgeUtils.isDirectObject(value)) {\r\n            record = Record.create(this._scheduler.clock, value, ActionType.NEXT, (a, b) => {\r\n                var result = true;\r\n\r\n                for (let i in a) {\r\n                    if (a.hasOwnProperty(i)) {\r\n                        if (a[i] !== b[i]) {\r\n                            result = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            });\r\n        }\r\n        else {\r\n            record = Record.create(this._scheduler.clock, value, ActionType.NEXT);\r\n        }\r\n\r\n        this._messages.push(record);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._messages.push(Record.create(this._scheduler.clock, error, ActionType.ERROR));\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._messages.push(Record.create(this._scheduler.clock, null, ActionType.COMPLETED));\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._scheduler.remove(this);\r\n    }\r\n\r\n    public clone() {\r\n        var result = MockObserver.create(this._scheduler);\r\n\r\n        result.messages = this._messages;\r\n\r\n        return result;\r\n    }\r\n}","import { TestScheduler } from \"./TestScheduler\";\r\nimport { Record } from \"./Record\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\n\r\nexport class MockPromise {\r\n    public static create(scheduler: TestScheduler, messages: [Record]) {\r\n        var obj = new this(scheduler, messages);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _messages: [Record] = <[Record]>[];\r\n    //get messages(){\r\n    //    return this._messages;\r\n    //}\r\n    //set messages(messages:[Record]){\r\n    //    this._messages = messages;\r\n    //}\r\n\r\n    private _scheduler: TestScheduler = null;\r\n\r\n    constructor(scheduler: TestScheduler, messages: [Record]) {\r\n        this._scheduler = scheduler;\r\n        this._messages = messages;\r\n    }\r\n\r\n    public then(successCb: Function, errorCb: Function, observer: IObserver) {\r\n        //var scheduler = <TestScheduler>(this.scheduler);\r\n\r\n        this._scheduler.setStreamMap(observer, this._messages);\r\n    }\r\n}","import { Collection } from \"./Collection\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\nimport { Log } from \"./Log\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\n\r\nexport class Hash<T> {\r\n    public static create<T>(children = {}) {\r\n        var obj = new this(<{ [s: string]: T }>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: { [s: string]: T } = {}) {\r\n        this._children = children;\r\n    }\r\n\r\n    private _children: {\r\n        [s: string]: T\r\n    } = null;\r\n\r\n    public getChildren() {\r\n        return this._children;\r\n    }\r\n\r\n    public getCount() {\r\n        var result = 0,\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result++;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getKeys() {\r\n        var result = Collection.create<string>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(key);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getValues() {\r\n        var result = Collection.create<T>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(children[key]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getChild(key: string) {\r\n        return this._children[key];\r\n    }\r\n\r\n    public setValue(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChild(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: {} | Hash<T>) {\r\n        var i = null,\r\n            children = null;\r\n\r\n        if (arg instanceof Hash) {\r\n            children = arg.getChildren();\r\n        }\r\n        else {\r\n            children = arg;\r\n        }\r\n\r\n        for (i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                this.addChild(i, children[i]);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public appendChild(key: string, value: any) {\r\n        if (this._children[key] instanceof Collection) {\r\n            let c = <any>(this._children[key]);\r\n\r\n            c.addChild(<T>value);\r\n        }\r\n        else {\r\n            this._children[key] = <any>(Collection.create<any>().addChild(value));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public setChildren(children: { [s: string]: T }) {\r\n        this._children = children;\r\n    }\r\n\r\n    public removeChild(arg: any): Collection<T> {\r\n        var result = [];\r\n\r\n        if (JudgeUtils.isString(arg)) {\r\n            let key = <string>arg;\r\n\r\n            result.push(this._children[key]);\r\n\r\n            this._children[key] = void 0;\r\n            delete this._children[key];\r\n        }\r\n        else if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg,\r\n                self = this;\r\n\r\n            this.forEach((val: any, key: string) => {\r\n                if (func(val, key)) {\r\n                    result.push(self._children[key]);\r\n\r\n                    self._children[key] = void 0;\r\n                    delete self._children[key];\r\n                }\r\n            });\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this._children = {};\r\n    }\r\n\r\n    public hasChild(key: string): boolean {\r\n        return this._children[key] !== void 0;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        var result = false;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (func(val, key)) {\r\n                result = true;\r\n                return $BREAK;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        var children = this._children;\r\n\r\n        for (let i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                if (func.call(context, children[i], i) === $BREAK) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public filter(func: Function): Hash<T> {\r\n        var result = {},\r\n            children = this._children,\r\n            value = null;\r\n\r\n        for (let key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                value = children[key];\r\n\r\n                if (func.call(children, value, key)) {\r\n                    result[key] = value;\r\n                }\r\n            }\r\n        }\r\n\r\n        return Hash.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: Function) {\r\n        var result = [],\r\n            self = this,\r\n            scope = this._children;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (!func.call(scope, val, key)) {\r\n                return;\r\n            }\r\n\r\n            result = [key, self.getChild(key)];\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public map(func: Function): Hash<T> {\r\n        var resultMap = {};\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            var result = func(val, key);\r\n\r\n            if (result !== $REMOVE) {\r\n                Log.error(!JudgeUtils.isArray(result) || result.length !== 2, Log.info.FUNC_MUST_BE(\"iterator\", \"[key, value]\"));\r\n\r\n                resultMap[result[0]] = result[1];\r\n            }\r\n        });\r\n\r\n        return Hash.create<T>(resultMap);\r\n    }\r\n\r\n    public toCollection(): Collection<any> {\r\n        var result = Collection.create<any>();\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result.addChildren(val);\r\n            }\r\n            //else if(val instanceof Hash){\r\n            //    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"toCollection\", \"value is Hash\"));\r\n            //}\r\n            else {\r\n                result.addChild(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public toArray(): Array<T> {\r\n        var result = [];\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result = result.concat(val.getChildren());\r\n            }\r\n            else {\r\n                result.push(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Hash<T>);\r\n    public clone(target: Hash<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Hash<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Hash.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Hash.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this._children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend({}, this._children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n}","import { BaseStream } from \"../stream/BaseStream\";\r\nimport { Record } from \"./Record\";\r\nimport { TestScheduler } from \"./TestScheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class TestStream extends BaseStream {\r\n    public static create(messages: [Record], scheduler: TestScheduler) {\r\n        var obj = new this(messages, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public scheduler: TestScheduler = null;\r\n    private _messages: [Record] = null;\r\n\r\n    constructor(messages: [Record], scheduler: TestScheduler) {\r\n        super(null);\r\n\r\n        this._messages = messages;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        //var scheduler = <TestScheduler>(this.scheduler);\r\n\r\n        this.scheduler.setStreamMap(observer, this._messages);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { Scheduler } from \"../core/Scheduler\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { Record } from \"./Record\";\r\nimport { ActionType } from \"./ActionType\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { MockObserver } from \"./MockObserver\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { TestStream } from \"./TestStream\";\r\nimport { MockPromise } from \"./MockPromise\";\r\n\r\nconst SUBSCRIBE_TIME = 200;\r\nconst DISPOSE_TIME = 1000;\r\n\r\nexport class TestScheduler extends Scheduler {\r\n    public static next(tick, value) {\r\n        if (JudgeUtils.isDirectObject(value)) {\r\n            return Record.create(tick, value, ActionType.NEXT, (a, b) => {\r\n                var result = true;\r\n\r\n                for (let i in a) {\r\n                    if (a.hasOwnProperty(i)) {\r\n                        if (a[i] !== b[i]) {\r\n                            result = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            });\r\n        }\r\n        else {\r\n            return Record.create(tick, value, ActionType.NEXT);\r\n        }\r\n    }\r\n\r\n    public static error(tick, error) {\r\n        return Record.create(tick, error, ActionType.ERROR);\r\n    }\r\n\r\n    public static completed(tick) {\r\n        return Record.create(tick, null, ActionType.COMPLETED);\r\n    }\r\n\r\n    public static create(isReset: boolean = false) {\r\n        var obj = new this(isReset);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(isReset: boolean) {\r\n        super();\r\n\r\n        this._isReset = isReset;\r\n    }\r\n\r\n    private _clock: number = null;\r\n    get clock() {\r\n        return this._clock;\r\n    }\r\n\r\n    set clock(clock: number) {\r\n        this._clock = clock;\r\n    }\r\n\r\n    private _isReset: boolean = false;\r\n    private _isDisposed: boolean = false;\r\n    private _timerMap: Hash<Function> = Hash.create<Function>();\r\n    private _streamMap: Hash<Function> = Hash.create<Function>();\r\n    private _subscribedTime: number = null;\r\n    private _disposedTime: number = null;\r\n    private _observer: MockObserver = null;\r\n\r\n    public setStreamMap(observer: IObserver, messages: [Record]) {\r\n        var self = this;\r\n\r\n        messages.forEach((record: Record) => {\r\n            var func = null;\r\n\r\n            switch (record.actionType) {\r\n                case ActionType.NEXT:\r\n                    func = () => {\r\n                        observer.next(record.value);\r\n                    };\r\n                    break;\r\n                case ActionType.ERROR:\r\n                    func = () => {\r\n                        observer.error(record.value);\r\n                    };\r\n                    break;\r\n                case ActionType.COMPLETED:\r\n                    func = () => {\r\n                        observer.completed();\r\n                    };\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_UNKNOW(\"actionType\"));\r\n                    break;\r\n            }\r\n\r\n            self._streamMap.addChild(String(record.time), func);\r\n        });\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this._isDisposed = true;\r\n    }\r\n\r\n    public publishRecursive(observer: MockObserver, initial: any, recursiveFunc: Function) {\r\n        var self = this,\r\n            //messages = [],\r\n            next = null,\r\n            completed = null;\r\n\r\n        this._setClock();\r\n\r\n        next = observer.next;\r\n        completed = observer.completed;\r\n\r\n        observer.next = (value) => {\r\n            next.call(observer, value);\r\n            self._tick(1);\r\n        };\r\n\r\n        observer.completed = () => {\r\n            completed.call(observer);\r\n            self._tick(1);\r\n        };\r\n\r\n        recursiveFunc(initial);\r\n    }\r\n\r\n    public publishInterval(observer: IObserver, initial: any, interval: number, action: Function): number {\r\n        //produce 10 val for test\r\n        var COUNT = 10,\r\n            messages = [];\r\n\r\n        this._setClock();\r\n\r\n        while (COUNT > 0 && !this._isDisposed) {\r\n            this._tick(interval);\r\n            messages.push(TestScheduler.next(this._clock, initial));\r\n\r\n            //no need to invoke action\r\n            //action(initial);\r\n\r\n            initial++;\r\n            COUNT--;\r\n        }\r\n\r\n        this.setStreamMap(observer, <[Record]>messages);\r\n        //this.setStreamMap(this._observer, <[Record]>messages);\r\n\r\n        return NaN;\r\n    }\r\n\r\n    public publishIntervalRequest(observer: IObserver, action: Function): number {\r\n        //produce 10 val for test\r\n        var COUNT = 10,\r\n            messages = [],\r\n            interval = 100,\r\n            num = 0;\r\n\r\n        this._setClock();\r\n\r\n        while (COUNT > 0 && !this._isDisposed) {\r\n            this._tick(interval);\r\n            messages.push(TestScheduler.next(this._clock, num));\r\n\r\n            num++;\r\n            COUNT--;\r\n        }\r\n\r\n        this.setStreamMap(observer, <[Record]>messages);\r\n        //this.setStreamMap(this._observer, <[Record]>messages);\r\n\r\n        return NaN;\r\n    }\r\n\r\n    public publishTimeout(observer: IObserver, time: number, action: Function): number {\r\n        var messages = [];\r\n\r\n        this._setClock();\r\n\r\n        this._tick(time);\r\n\r\n        messages.push(TestScheduler.next(this._clock, time), TestScheduler.completed(this._clock + 1));\r\n\r\n        this.setStreamMap(observer, <[Record]>messages);\r\n\r\n        return NaN;\r\n    }\r\n\r\n    private _setClock() {\r\n        if (this._isReset) {\r\n            this._clock = this._subscribedTime;\r\n        }\r\n    }\r\n\r\n    public startWithTime(create: Function, subscribedTime: number, disposedTime: number) {\r\n        var observer = this.createObserver(),\r\n            source, subscription,\r\n            self = this;\r\n\r\n        this._subscribedTime = subscribedTime;\r\n        this._disposedTime = disposedTime;\r\n\r\n        this._clock = subscribedTime;\r\n\r\n        this._runAt(subscribedTime, () => {\r\n            source = create();\r\n            subscription = source.subscribe(observer);\r\n        });\r\n\r\n        this._runAt(disposedTime, () => {\r\n            subscription.dispose();\r\n            self._isDisposed = true;\r\n        });\r\n\r\n        this._observer = observer;\r\n\r\n        this.start();\r\n\r\n        return observer;\r\n    }\r\n\r\n    public startWithSubscribe(create, subscribedTime = SUBSCRIBE_TIME) {\r\n        return this.startWithTime(create, subscribedTime, DISPOSE_TIME);\r\n    }\r\n\r\n    public startWithDispose(create, disposedTime = DISPOSE_TIME) {\r\n        return this.startWithTime(create, SUBSCRIBE_TIME, disposedTime);\r\n    }\r\n\r\n    public publicAbsolute(time, handler) {\r\n        this._runAt(time, () => {\r\n            handler();\r\n        });\r\n    }\r\n\r\n    public start() {\r\n        var extremeNumArr = this._getMinAndMaxTime(),\r\n            min = extremeNumArr[0],\r\n            max = extremeNumArr[1],\r\n            time = min;\r\n\r\n        //todo reduce loop time\r\n        while (time <= max) {\r\n            //if(this._isDisposed){\r\n            //    break;\r\n            //}\r\n\r\n            //because \"_exec,_runStream\" may change \"_clock\",\r\n            //so it should reset the _clock\r\n\r\n            this._clock = time;\r\n\r\n            this._exec(time, this._timerMap);\r\n\r\n            this._clock = time;\r\n\r\n            this._runStream(time);\r\n\r\n            time++;\r\n\r\n            //todo get max time only from streamMap?\r\n            //need refresh max time.\r\n            //because if timerMap has callback that create infinite stream(as interval),\r\n            //it will set streamMap so that the max time will change\r\n            max = this._getMinAndMaxTime()[1];\r\n        }\r\n    }\r\n\r\n    public createStream(args) {\r\n        return TestStream.create(Array.prototype.slice.call(arguments, 0), this);\r\n    }\r\n\r\n    public createObserver() {\r\n        return MockObserver.create(this);\r\n    }\r\n\r\n    public createResolvedPromise(time: number, value: any) {\r\n        return MockPromise.create(this, [TestScheduler.next(time, value), TestScheduler.completed(time + 1)]);\r\n    }\r\n\r\n    public createRejectPromise(time: number, error: any) {\r\n        return MockPromise.create(this, [TestScheduler.error(time, error)]);\r\n    }\r\n\r\n    private _getMinAndMaxTime() {\r\n        var timeArr: any = (this._timerMap.getKeys().addChildren(this._streamMap.getKeys()));\r\n\r\n        timeArr = timeArr.map((key) => {\r\n            return Number(key);\r\n        }).toArray();\r\n\r\n        return [Math.min.apply(Math, timeArr), Math.max.apply(Math, timeArr)];\r\n    }\r\n\r\n    private _exec(time, map) {\r\n        var handler = map.getChild(String(time));\r\n\r\n        if (handler) {\r\n            handler();\r\n        }\r\n    }\r\n\r\n    private _runStream(time) {\r\n        var handler = this._streamMap.getChild(String(time));\r\n\r\n        if (handler) {\r\n            handler();\r\n        }\r\n    }\r\n\r\n    private _runAt(time: number, callback: Function) {\r\n        this._timerMap.addChild(String(time), callback);\r\n    }\r\n\r\n    private _tick(time: number) {\r\n        this._clock += time;\r\n    }\r\n}"],"names":["JudgeUtils","JudgeUtils$","InnerObserver","root"],"mappings":"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"}